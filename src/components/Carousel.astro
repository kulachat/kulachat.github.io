---
export interface Slide {
  id: number;
  title: string;
  subtitle?: string;
  content: string;
  image: string;
  imageAlt: string;
  backgroundColor?: string;
  isActive?: boolean;
}

export interface Props {
  slides: Slide[];
}

const { slides } = Astro.props;
---

<div class="slide">
  <div id="myCarousel" class="carousel slide" data-ride="carousel">
    <!-- Wrapper for slides -->
    <div class="carousel-inner">
      {slides.map((slide, index) => (
        <div 
          class={`item one ${index === 0 ? 'active' : ''}`}
          style={slide.backgroundColor ? `background-color: ${slide.backgroundColor}` : ''}
        >
          <div class="grid-parent grid-no-offset">
            <div class="intro-image-container">
              <picture>
                <img 
                  class="intro-image" 
                  src={slide.image} 
                  alt={slide.imageAlt}
                />
              </picture>
            </div>
            <div class="intro-text grid-item">
              <h1>{slide.title}</h1>
              {slide.subtitle && <h2>{slide.subtitle}</h2>}
              <br />
              <br />
              <div set:html={slide.content} />
            </div>
          </div>
        </div>
      ))}
    </div>

    <!-- Left and right controls -->
    <a class="left carousel-control" href="#myCarousel" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
</div>

<script>
  // Initialize carousel when component loads
  document.addEventListener('DOMContentLoaded', () => {
    if (typeof (window as any).jQuery !== 'undefined' && (window as any).jQuery.fn.carousel) {
      (window as any).jQuery('.carousel').carousel({
        interval: false,
      });
    }
  });
</script>